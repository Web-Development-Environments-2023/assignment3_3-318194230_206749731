(self["webpackChunkassignment_3_3"]=self["webpackChunkassignment_3_3"]||[]).push([[436],{9436:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>b});t(7941);var s=function(){var e=this,r=e._self._c;return r("div",{staticClass:"background-div"},[r("div",{staticClass:"container"},[r("h1",{staticClass:"title"},[e._v("Search Page")]),r("div",{staticClass:"search-wrapper"},[r("b-form",{on:{submit:function(r){return r.preventDefault(),e.onSearch.apply(null,arguments)},reset:function(r){return r.preventDefault(),e.onReset.apply(null,arguments)}}},[r("b-form-group",{attrs:{id:"input-group-recipeName","label-cols-sm":"3",label:"Recipe Name:","label-for":"recipeName",state:!e.recipeNameError&&null,"invalid-feedback":e.recipeNameError?"Recipe name is required":null}},[r("b-form-input",{attrs:{id:"recipeName",type:"text"},model:{value:e.form.recipeName,callback:function(r){e.$set(e.form,"recipeName",r)},expression:"form.recipeName"}})],1),r("b-form-group",{attrs:{id:"input-group-recipeCount","label-cols-sm":"3",label:"Number of Recipes:","label-for":"recipeCount"}},[r("b-form-select",{attrs:{id:"recipeCount",options:e.recipeCountOptions},model:{value:e.form.recipeCount,callback:function(r){e.$set(e.form,"recipeCount",r)},expression:"form.recipeCount"}})],1),r("b-form-group",{attrs:{id:"input-group-cuisines","label-cols-sm":"3",label:"Cuisines:","label-for":"cuisines"}},[r("b-form-select",{attrs:{id:"cuisines",options:e.Cuisines},model:{value:e.form.cuisines,callback:function(r){e.$set(e.form,"cuisines",r)},expression:"form.cuisines"}})],1),r("b-form-group",{attrs:{id:"input-group-diet","label-cols-sm":"3",label:"Diet:","label-for":"diet"}},[r("b-form-select",{attrs:{id:"diet",options:e.Diet},model:{value:e.form.diet,callback:function(r){e.$set(e.form,"diet",r)},expression:"form.diet"}})],1),r("b-form-group",{attrs:{id:"input-group-intolerances","label-cols-sm":"4",label:"Intolerances:","label-for":"intolerances"}},[r("b-form-select",{attrs:{id:"intolerances",options:e.Intolerances},model:{value:e.form.intolerances,callback:function(r){e.$set(e.form,"intolerances",r)},expression:"form.intolerances"}})],1),r("div",{staticClass:"button-group"},[r("b-button",{attrs:{type:"reset",variant:"danger"}},[e._v("Reset")]),r("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Search")])],1)],1)],1),e.$root.store.username&&e.lastSearch&&0!==Object.keys(e.lastSearch).length?r("div",{staticClass:"lastSearch"},[r("h1",{staticStyle:{"font-size":"1.2em"}},[e._v("You recently searched:")]),r("img",{staticClass:"mb-2",staticStyle:{width:"13rem",height:"5rem"},attrs:{src:e.lastSearch.image,alt:"Image"}}),r("p",{staticStyle:{"font-size":"0.6rem"}},[r("strong",[e._v(e._s(e.lastSearch.title))])])]):e._e()]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.showresults,expression:"showresults"}],staticClass:"results-container"},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showresults,expression:"showresults"}],attrs:{id:"results"}},[r("div",{attrs:{id:"resultsempty"}},[r("h1",{directives:[{name:"show",rawName:"v-show",value:0===e.resultsfound,expression:"resultsfound === 0"}],staticClass:"massages"},[e._v(" Sorry, no results have been returned ")])]),r("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.resultsfound,expression:"resultsfound !== 0"}],attrs:{id:"resultsnotempty"}},[r("b-select",{staticClass:"Select-bars",attrs:{id:"PopOrPrep",options:["Please select filter","Popularity","Preparation"]},model:{value:e.PopOrPrep,callback:function(r){e.PopOrPrep=r},expression:"PopOrPrep"}}),r("b-button",{directives:[{name:"show",rawName:"v-show",value:"Please select filter"!==e.PopOrPrep,expression:"PopOrPrep !== 'Please select filter'"}],staticClass:"buttons",on:{click:e.sortThem}},[e._v("Sort by Filters")]),r("br"),r("br"),r("div",{staticClass:"results-container"},[r("div",{staticClass:"row"},e._l(e.search_results,(function(e){return r("b-col",{key:e.id,attrs:{cols:"4"}},[r("RecipePreview",{staticClass:"recipePreview",attrs:{recipe:e}})],1)})),1)])],1)])])])},i=[],n=t(124),a=t(5957),o=t(8534),c=(t(3210),t(4916),t(5306),t(8862),t(7658),t(2707),function(){var e=this,r=e._self._c;return r("div",[r("b-card",{staticClass:"mb-2",staticStyle:{width:"15rem",height:"27rem"},attrs:{"img-src":e.recipe.image,"img-alt":"Image","img-top":"",tag:"article"},on:{click:e.navigateToRecipe,mouseover:function(r){return e.setHovered(!0)},mouseleave:function(r){return e.setHovered(!1)}}},[r("b-card-text",[r("h5",{staticClass:"title",class:[{underline:e.isHovered},{"blue-text":e.recipe.seen&&e.$root.store.username}],staticStyle:{"font-size":"0.5rem"}},[r("strong",[e._v(e._s(e.recipe.title))])]),r("ul",{staticClass:"recipe-overview",class:{underline:e.isHovered},style:{fontSize:"0.8rem",color:e.isImageClicked?"red":"inherit"}},[r("li",[e._v("Recipe ID: "+e._s(e.recipe.recipe_id))]),r("li",[e._v("Popularity: "+e._s(e.recipe.popularity))]),r("li",[e._v("Vegan: "+e._s(e.recipe.vegan))]),r("li",[e._v("Vegetarian: "+e._s(e.recipe.vegetarian))]),r("li",[e._v("Gluten Free: "+e._s(e.recipe.glutenFree))]),e.$root.store.username?r("li",[e._v("Favorite: "+e._s(e.recipe.favorite?"❤️":"It is not in your favorite"))]):e._e(),e.$root.store.username?r("li",[e._v("Seen: "+e._s(e.recipe.seen?"You have seen this recipe":"You did not seen this recipe"))]):e._e()])]),r("div",{staticClass:"d-flex justify-content-between"},[e.$root.store.username?r("b-button",{staticClass:"mb-2",attrs:{variant:"primary"},on:{click:function(r){return r.stopPropagation(),e.addFavrecipe.apply(null,arguments)}}},[r("b-icon",{attrs:{icon:"heart-fill"}}),e._v(" Like ")],1):e._e()],1)],1)],1)}),l=[];const u={props:{recipe:{type:Object,required:!0}},data:function(){return{isHovered:!1,isImageClicked:!1}},methods:{navigateToRecipe:function(){var e=this;return(0,o.Z)((0,n.Z)().mark((function r(){var t;return(0,n.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.$root.store.username){r.next=14;break}return r.prev=1,e.axios.defaults.withCredentials=!0,r.next=5,e.axios.post(e.$root.store.server_domain+"/users/LastViewed",{username:e.$root.store.username,recipe_id:e.recipe.recipe_id});case 5:t=r.sent,e.axios.defaults.withCredentials=!1,console.log(t),r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](1),console.log(r.t0.response),e.form.submitError=r.t0.response.data.message;case 14:e.$router.push({name:"recipe",params:{recipeId:e.recipe.recipe_id}});case 15:case"end":return r.stop()}}),r,null,[[1,10]])})))()},setHovered:function(e){this.isHovered=e},handleImageClick:function(){this.isImageClicked=!0},addFavrecipe:function(){var e=this;return(0,o.Z)((0,n.Z)().mark((function r(){return(0,n.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.axios.post(e.$root.store.server_domain+"/users/favorites",{username:e.$root.store.username,recipeId:e.recipe.recipe_id},{withCredentials:!0});case 3:r.sent,r.next=10;break;case 6:r.prev=6,r.t0=r["catch"](0),console.log(r.t0.response),e.form.submitError=r.t0.response.data.message;case 10:case"end":return r.stop()}}),r,null,[[0,6]])})))()}}},p=u;var f=t(1001),v=(0,f.Z)(p,c,l,!1,null,"13eb267c",null);const d=v.exports,h={name:"SearchPage",components:{RecipePreview:d},data:function(){return{form:{recipeName:"",recipeCount:5,cuisines:null,diet:null,intolerances:null},recipeNameError:!1,recipeCountOptions:[5,10,15],Cuisines:["African","American","British","Cajun","Caribbean","Chinese","Eastern","European","European","French","German","Greek","Indian","Irish","Italian","Japanese","Jewish","Korean","Latin","American","Mediterranean","Mexican","Middle","Eastern","Nordic","Southern","Spanish","Thai","Vietnamese"],Diet:["Gluten Free","Ketogenic","Vegetarian","Lacto-Vegetarian","Ovo-Vegetarian","Vegan","Pescetarian","Paleo","Primal","Whole30"],Intolerances:["Dairy","Egg","Gluten","Grain","Peanut","Seafood","Sesame","Shellfish","Soy","Sulfite","Tree","Nut","Wheat"],search_results:[],resultsfound:0,is_query:!0,PopOrPrep:"Please select filter",showresults:!1,lastSearch:null}},created:function(){var e=localStorage.getItem("lastSearch");e&&(this.lastSearch=JSON.parse(e))},methods:{onSearch:function(){var e=this;return(0,o.Z)((0,n.Z)().mark((function r(){var t,s,i,o,c,l,u,p,f;return(0,n.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(s=e.form,i=s.recipeName,o=s.recipeCount,c=s.cuisines,l=s.diet,u=s.intolerances,""!==i.trim()){r.next=4;break}return e.recipeNameError=!0,r.abrupt("return");case 4:return e.recipeNameError=!1,r.prev=5,e.axios.defaults.withCredentials=!0,r.next=9,e.axios.get(e.$root.store.server_domain+"/recipes/searchForRecipe?query="+i+"&number="+o+"&cuisine='"+c+"'&diet="+l+"&intolerance="+u);case 9:p=r.sent,200!==p.status&&e.$router.replace("/NotFound"),e.axios.defaults.withCredentials=!1,r.next=19;break;case 14:return r.prev=14,r.t0=r["catch"](5),console.log("error.response.status",r.t0.response.status),e.$router.replace("/NotFound"),r.abrupt("return");case 19:f=p.data,f.length>0&&(e.lastSearch=f[0],localStorage.setItem("lastSearch",JSON.stringify(f[0]))),e.search_results=[],(t=e.search_results).push.apply(t,(0,a.Z)(f)),e.resultsfound=e.search_results.length,e.showresults=!0;case 25:case"end":return r.stop()}}),r,null,[[5,14]])})))()},sortThem:function(){"Please select filter"==this.PopOrPrep?alert("You have to choose a filter before sort"):"Popularity"==this.PopOrPrep?this.sortByRating():"Preparation"==this.PopOrPrep&&this.sortByTime()},onReset:function(){var e=this;this.form={recipeName:"",recipeCount:5,cuisines:null,diet:null,intolerances:null},this.$nextTick((function(){e.$v.$reset()})),this.results=[],this.showresults=!1},isEmpty:function(){return this.search_results.length>0},sortByRating:function(){this.search_results=this.search_results.sort((function(e,r){return e.popularity<r.popularity?1:e.popularity>r.popularity?-1:0}))},sortByTime:function(){this.search_results=this.search_results.sort((function(e,r){return e.readyInMinutes>r.readyInMinutes?1:e.readyInMinutes<r.readyInMinutes?-1:0}))}}},m=h;var g=(0,f.Z)(m,s,i,!1,null,"478cf37d",null);const b=g.exports},1530:(e,r,t)=>{"use strict";var s=t(8710).charAt;e.exports=function(e,r,t){return r+(t?s(e,r).length:1)}},4362:(e,r,t)=>{var s=t(1589),i=Math.floor,n=function(e,r){var t=e.length,c=i(t/2);return t<8?a(e,r):o(e,n(s(e,0,c),r),n(s(e,c),r),r)},a=function(e,r){var t,s,i=e.length,n=1;while(n<i){s=n,t=e[n];while(s&&r(e[s-1],t)>0)e[s]=e[--s];s!==n++&&(e[s]=t)}return e},o=function(e,r,t,s){var i=r.length,n=t.length,a=0,o=0;while(a<i||o<n)e[a+o]=a<i&&o<n?s(r[a],t[o])<=0?r[a++]:t[o++]:a<i?r[a++]:t[o++];return e};e.exports=n},5117:(e,r,t)=>{"use strict";var s=t(6330),i=TypeError;e.exports=function(e,r){if(!delete e[r])throw i("Cannot delete property "+s(r)+" of "+s(e))}},8886:(e,r,t)=>{var s=t(8113),i=s.match(/firefox\/(\d+)/i);e.exports=!!i&&+i[1]},256:(e,r,t)=>{var s=t(8113);e.exports=/MSIE|Trident/.test(s)},8008:(e,r,t)=>{var s=t(8113),i=s.match(/AppleWebKit\/(\d+)\./);e.exports=!!i&&+i[1]},7007:(e,r,t)=>{"use strict";t(4916);var s=t(1470),i=t(8052),n=t(2261),a=t(7293),o=t(5112),c=t(8880),l=o("species"),u=RegExp.prototype;e.exports=function(e,r,t,p){var f=o(e),v=!a((function(){var r={};return r[f]=function(){return 7},7!=""[e](r)})),d=v&&!a((function(){var r=!1,t=/a/;return"split"===e&&(t={},t.constructor={},t.constructor[l]=function(){return t},t.flags="",t[f]=/./[f]),t.exec=function(){return r=!0,null},t[f](""),!r}));if(!v||!d||t){var h=s(/./[f]),m=r(f,""[e],(function(e,r,t,i,a){var o=s(e),c=r.exec;return c===n||c===u.exec?v&&!a?{done:!0,value:h(r,t,i)}:{done:!0,value:o(t,r,i)}:{done:!1}}));i(String.prototype,e,m[0]),i(u,f,m[1])}p&&c(u[f],"sham",!0)}},647:(e,r,t)=>{var s=t(1702),i=t(7908),n=Math.floor,a=s("".charAt),o=s("".replace),c=s("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,r,t,s,p,f){var v=t+e.length,d=s.length,h=u;return void 0!==p&&(p=i(p),h=l),o(f,h,(function(i,o){var l;switch(a(o,0)){case"$":return"$";case"&":return e;case"`":return c(r,0,t);case"'":return c(r,v);case"<":l=p[c(o,1,-1)];break;default:var u=+o;if(0===u)return i;if(u>d){var f=n(u/10);return 0===f?i:f<=d?void 0===s[f-1]?a(o,1):s[f-1]+a(o,1):i}l=s[u-1]}return void 0===l?"":l}))}},7651:(e,r,t)=>{var s=t(6916),i=t(9670),n=t(614),a=t(4326),o=t(2261),c=TypeError;e.exports=function(e,r){var t=e.exec;if(n(t)){var l=s(t,e,r);return null!==l&&i(l),l}if("RegExp"===a(e))return s(o,e,r);throw c("RegExp#exec called on incompatible receiver")}},6091:(e,r,t)=>{var s=t(6530).PROPER,i=t(7293),n=t(1361),a="​᠎";e.exports=function(e){return i((function(){return!!n[e]()||a[e]()!==a||s&&n[e].name!==e}))}},2707:(e,r,t)=>{"use strict";var s=t(2109),i=t(1702),n=t(9662),a=t(7908),o=t(6244),c=t(5117),l=t(1340),u=t(7293),p=t(4362),f=t(9341),v=t(8886),d=t(256),h=t(7392),m=t(8008),g=[],b=i(g.sort),x=i(g.push),w=u((function(){g.sort(void 0)})),_=u((function(){g.sort(null)})),y=f("sort"),C=!u((function(){if(h)return h<70;if(!(v&&v>3)){if(d)return!0;if(m)return m<603;var e,r,t,s,i="";for(e=65;e<76;e++){switch(r=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:t=3;break;case 68:case 71:t=4;break;default:t=2}for(s=0;s<47;s++)g.push({k:r+s,v:t})}for(g.sort((function(e,r){return r.v-e.v})),s=0;s<g.length;s++)r=g[s].k.charAt(0),i.charAt(i.length-1)!==r&&(i+=r);return"DGBEFHACIJK"!==i}})),P=w||!_||!y||!C,S=function(e){return function(r,t){return void 0===t?-1:void 0===r?1:void 0!==e?+e(r,t)||0:l(r)>l(t)?1:-1}};s({target:"Array",proto:!0,forced:P},{sort:function(e){void 0!==e&&n(e);var r=a(this);if(C)return void 0===e?b(r):b(r,e);var t,s,i=[],l=o(r);for(s=0;s<l;s++)s in r&&x(i,r[s]);p(i,S(e)),t=o(i),s=0;while(s<t)r[s]=i[s++];while(s<l)c(r,s++);return r}})},5306:(e,r,t)=>{"use strict";var s=t(2104),i=t(6916),n=t(1702),a=t(7007),o=t(7293),c=t(9670),l=t(614),u=t(8554),p=t(9303),f=t(7466),v=t(1340),d=t(4488),h=t(1530),m=t(8173),g=t(647),b=t(7651),x=t(5112),w=x("replace"),_=Math.max,y=Math.min,C=n([].concat),P=n([].push),S=n("".indexOf),k=n("".slice),$=function(e){return void 0===e?e:String(e)},I=function(){return"$0"==="a".replace(/./,"$0")}(),N=function(){return!!/./[w]&&""===/./[w]("a","$0")}(),E=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));a("replace",(function(e,r,t){var n=N?"$":"$0";return[function(e,t){var s=d(this),n=u(e)?void 0:m(e,w);return n?i(n,e,s,t):i(r,v(s),e,t)},function(e,i){var a=c(this),o=v(e);if("string"==typeof i&&-1===S(i,n)&&-1===S(i,"$<")){var u=t(r,a,o,i);if(u.done)return u.value}var d=l(i);d||(i=v(i));var m=a.global;if(m){var x=a.unicode;a.lastIndex=0}var w=[];while(1){var I=b(a,o);if(null===I)break;if(P(w,I),!m)break;var N=v(I[0]);""===N&&(a.lastIndex=h(o,f(a.lastIndex),x))}for(var E="",O=0,R=0;R<w.length;R++){I=w[R];for(var F=v(I[0]),M=_(y(p(I.index),o.length),0),T=[],Z=1;Z<I.length;Z++)P(T,$(I[Z]));var A=I.groups;if(d){var D=C([F],T,M,o);void 0!==A&&P(D,A);var H=v(s(i,void 0,D))}else H=g(F,o,M,T,A,i);M>=O&&(E+=k(o,O,M)+H,O=M+F.length)}return E+k(o,O)}]}),!E||!I||N)},3210:(e,r,t)=>{"use strict";var s=t(2109),i=t(3111).trim,n=t(6091);s({target:"String",proto:!0,forced:n("trim")},{trim:function(){return i(this)}})}}]);
//# sourceMappingURL=436.3d314c43.js.map